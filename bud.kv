#:kivy 1.9

WindowManager:
    MainWindow:
    PassWindow:
    SecondWindow:
    ThirdWindow:
    FourthWindow:

<MyOption@SpinnerOption>:
    font_size: min(root.width,root.height) / 4  

<MainWindow>:
    name: 'main'

    canvas:
        Color:
            rgba: 0, 0, .2, 1   
  
        # size and position of Canvas
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:
        Label:
            pos_hint:{"x":0.3,"top":0.9}
            size_hint: 0.4, 0.1
            text: 'Budget Manager '
            font_size: min(root.width,root.height) / 10
            color: 1,0,0,1

        Label:
            pos_hint:{"x":0,"top":0.7}
            size_hint: 0.4, 0.1
            text: 'Password: '
            font_size: min(root.width,root.height) / 16
        TextInput:
            id: passw
            multiline : False
            pos_hint:{"right":0.9,"top":0.7}
            size_hint: 0.4, 0.1
            font_size: min(root.width,root.height) / 16
            padding: 6,self.height/2 - self.font_size/2,6,6

        Label:
            id: warning
            pos_hint:{"right":0.9,"top":0.58}
            size_hint: 0.4, 0.05
            text: ''
            font_size: min(root.width,root.height) / 32
            color: 1,0,0,1
        
        Button:
            pos_hint:{"x":0.3,"y":0.25}
            size_hint: 0.4, 0.1
            font_size: min(root.width,root.height) / 16
            text: 'Submit'
            on_release: 
                if root.password(passw.text): app.root.current = 'second'; warning.text = ''
                else: warning.text = 'password not correct'
                passw.text = ''
                root.manager.transition.direction = 'left'

        Button:
            pos_hint:{"x":0.3,"y":0.08}
            size_hint: 0.4, 0.06
            font_size: min(root.width,root.height) / 24
            text: 'Change Password'
            on_release: 
                app.root.current = 'pass'
                root.manager.transition.direction = 'right'
        
            
<PassWindow>:
    name: 'pass'

    canvas:
        Color:
            rgba: 0, 0, .2, 1   
  
        # size and position of Canvas
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:


        Label:
            pos_hint:{"x":0.3,"top":0.9}
            size_hint: 0.4, 0.1
            text: 'Change Password'
            font_size: min(root.width,root.height) / 10
            color: 1,0,0,1

        Label:
            pos_hint:{"x":0,"top":0.7}
            size_hint: 0.4, 0.1
            text: 'Old Password: '
            font_size: min(root.width,root.height) / 16
        TextInput:
            id: old
            multiline : False
            pos_hint:{"right":0.9,"top":0.7}
            size_hint: 0.4, 0.1
            font_size: min(root.width,root.height) / 16
            padding: 6,self.height/2 - self.font_size/2,6,6

        Label:
            id: warning
            pos_hint:{"right":0.9,"top":0.58}
            size_hint: 0.4, 0.05
            text: ''
            font_size: min(root.width,root.height) / 32
            color: 1,0,0,1

        Label:
            pos_hint:{"x":0,"top":0.5}
            size_hint: 0.4, 0.1
            text: 'New Password: '
            font_size: min(root.width,root.height) / 16
        TextInput:
            id: new
            multiline : False
            pos_hint:{"right":0.9,"top":0.5}
            size_hint: 0.4, 0.1
            font_size: min(root.width,root.height) / 16
            padding: 6,self.height/2 - self.font_size/2,6,6
        
        Button:
            pos_hint:{"x":0.3,"y":0.25}
            size_hint: 0.4, 0.1
            font_size: min(root.width,root.height) / 16
            text: 'Submit'
            on_release: 
                if root.passChange(old.text,new.text): app.root.current = 'main'; warning.text = ''
                else: warning.text = 'password not correct'
                old.text = ''
                new.text = ''
                root.manager.transition.direction = 'left'
            
        Button:
            pos_hint:{"x":0.3,"y":0.08}
            size_hint: 0.4, 0.06
            font_size: min(root.width,root.height) / 24
            text: 'Home'
            on_release: 
                app.root.current = 'main'
                root.manager.transition.direction = 'left'
        
    



<SecondWindow>:
    name: 'second'

    
    #canvas:
    #    Color:
    #        rgba: .5, .5, 0, 1
    #    Rectangle:
    #        pos: self.size[0]*.1,self.size[1]*.1
    #        size: self.size[0]*.7,self.size[1]*.05
    
    FloatLayout:

        Button:
            pos_hint:{"x":0.02,"y":0.85}
            size_hint: 0.2, 0.05
            font_size: min(root.width,root.height) / 24
            text: 'Home'
            on_release: 
                app.root.current = 'main'
                root.manager.transition.direction = 'right'

        Button:
            pos_hint:{"x":0.78,"y":0.85}
            size_hint: 0.2, 0.05
            font_size: min(root.width,root.height) / 24
            text: 'Forward'
            on_release: 
                app.root.current = 'third'
                root.manager.transition.direction = 'left'

        Label:
            pos_hint:{"x":0.3,"top":0.9}
            size_hint: 0.4, 0.1
            text: 'New Entry'
            font_size: min(root.width,root.height) / 10
            color: 1,0,0,1

        Label:
            pos_hint:{"x":0.1,"top":0.8}
            size_hint: 0.2, 0.1
            text: 'Category'
            font_size: min(root.width,root.height) / 16 

        Label:
            pos_hint:{"x":0.4,"top":0.8}
            size_hint: 0.2, 0.1
            text: 'Amount'
            font_size: min(root.width,root.height) / 16  

        Label:
            pos_hint:{"x":0.7,"top":0.8}
            size_hint: 0.2, 0.1
            text: 'Currency'
            font_size: min(root.width,root.height) / 16  

        Spinner:
            id: category
            size_hint: 0.2, 0.05
            pos_hint: {"x":0.1,"top":0.7}
            option_cls: "MyOption"
            font_size: min(root.width,root.height) / 24
            text: 'Choose'
            values: 'Income','Food','Bills','Clothing','Education','Health','Fun'
            on_text: None

        TextInput:
            id: amount
            multiline : False
            pos_hint:{"x":0.4,"top":0.7}
            size_hint: 0.2, 0.05
            font_size: min(root.width,root.height) / 32
            padding: 6,self.height/2 - self.font_size/2,6,6

        Spinner:
            id: currency
            size_hint: 0.2, 0.05
            pos_hint: {"x":0.7,"top":0.7}
            font_size: min(root.width,root.height) / 24
            text: 'Choose'
            values: 'Dollar','Euro','Lira'

        Label:
            size_hint: 0.2, 0.1
            pos_hint: {"x":0.1,"y":0.45}
            text: 'Notes'
            font_size: min(root.width,root.height) / 16

        TextInput:
            id: notes
            size_hint: 0.5, 0.1
            pos_hint: {"x":0.4,"y":0.45}
            font_size: min(root.width,root.height) / 36
            padding: 6,self.height/2 - self.font_size/2,6,6

        Label:
            size_hint: 0.2, 0.1
            pos_hint: {"x":0.1,"center_y":0.35}
            text: 'Date'
            font_size: min(root.width,root.height) / 16
        
        TextInput:
            id: day
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.4,"center_y":0.35}
            font_size: min(root.width,root.height) / 36
            padding: 2,self.height/2 - self.font_size/2,2,2
            multiline: False

        Label:
            size_hint: 0.02, 0.05
            pos_hint: {"x":0.45,"center_y":0.35}
            font_size: min(root.width,root.height) / 36
            text: '-'

        TextInput:
            id: month
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.48,"center_y":0.35}
            font_size: min(root.width,root.height) / 36
            padding: 2,self.height/2 - self.font_size/2,2,2
            multiline: False

        Label:
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.54,"center_y":0.35}
            font_size: min(root.width,root.height) / 36
            text: '   -   ' + str(root.year())

        Button:
            pos_hint:{"x":0.7,"y":0.3}
            size_hint: 0.2, 0.1
            font_size: min(root.width,root.height) / 24
            text: 'Save'
            on_release: 
                if self.text != 'Save': self.text = 'Save'; save.text = ''; category.text = 'Choose'; amount.text = ''; currency.text = 'Choose'; notes.text = ''; day.text = ''; month.text = ''
                elif not root.dateValid(day.text,month.text): save.text = 'Date is not Valid'; save.color = 1,0,0,1
                elif category.text == 'Choose': save.text = 'Select Category'; save.color = 1,0,0,1
                elif not root.decimal(amount.text): save.text = 'No Valid Amount'; save.color = 1,0,0,1  
                elif currency.text == 'Choose': save.text = 'Select Currency'; save.color = 1,0,0,1
                else: root.write(day.text +'-'+ month.text +'-'+ str(root.year()) + ';' + category.text +';'+ amount.text +';'+ currency.text +';'+ notes.text +';'+'\n'); self.text = 'Clear'; save.text = 'Successfully Saved'; save.color = 0,1,0,1 ; lastSaved.text = root.savedLast()[0] +'          '+' '.join(root.savedLast()[2:4]) + '          ' + root.savedLast()[1]
              
        Label:
            id: save
            size_hint: 0.3, 0.1
            pos_hint: {"x":0.6,"center_y":0.25}
            font_size: min(root.width,root.height) / 24
            text: ' '

        Label:
            size_hint: 0.2, 0.1
            pos_hint: {"x":0.1,"center_y":0.2}
            text: 'Last Saved'
            font_size: min(root.width,root.height) / 16

        Button:
            id: lastSaved
            size_hint: 0.8, 0.05
            pos_hint: {"x":0.02,"y":0.1}
            text: root.savedLast()[0] +'          '+' '.join(root.savedLast()[2:4]) + '          ' + root.savedLast()[1] if root.savedLast() else ''
            font_size: min(root.width,root.height) / 24
            multiline: False
            background_color: .5,.5,0,1
        
        Button:
            pos_hint:{"x":0.82,"y":0.1}
            size_hint: 0.16, 0.05
            font_size: min(root.width,root.height) / 24
            text: 'Delete'
            background_color: 1,0,0,1
            on_release: 
                root.delete()
                if root.savedLast(): lastSaved.text = root.savedLast()[0] +'          '+' '.join(root.savedLast()[2:4]) + '          ' + root.savedLast()[1]
                else: lastSaved.text = ''

<ThirdWindow>:
    name: 'third'
    on_pre_enter: root.refresh()

    FloatLayout:

        Button:
            pos_hint:{"x":0.02,"y":0.85}
            size_hint: 0.2, 0.05
            font_size: min(root.width,root.height) / 24
            text: 'Back'
            on_release: 
                app.root.current = 'second'
                root.manager.transition.direction = 'right'

        Button:
            pos_hint:{"x":0.78,"y":0.85}
            size_hint: 0.2, 0.05
            font_size: min(root.width,root.height) / 24
            text: 'Forward'
            on_release: 
                app.root.current = 'fourth'
                root.manager.transition.direction = 'left'

        Label:
            pos_hint:{"x":0.3,"top":0.96}
            size_hint: 0.4, 0.1
            text: 'Last 10'
            font_size: min(root.width,root.height) / 10
            color: 1,0,0,1

        Label:
            pos_hint:{"x":0.3,"top":0.88}
            size_hint: 0.4, 0.1
            text: 'Entries'
            font_size: min(root.width,root.height) / 10
            color: 1,0,0,1


<FourthWindow>:
    name: 'fourth'
    incD: incD
    incE: incE
    incL: incL
    fooD: fooD
    fooE: fooE
    fooL: fooL
    bilD: bilD
    bilE: bilE
    bilL: bilL
    cloD: cloD
    cloE: cloE
    cloL: cloL
    eduD: eduD
    eduE: eduE
    eduL: eduL
    heaD: heaD
    heaE: heaE
    heaL: heaL
    entD: entD
    entE: entE
    entL: entL



    FloatLayout:

        Button:
            pos_hint:{"x":0.02,"y":0.85}
            size_hint: 0.2, 0.05
            font_size: min(root.width,root.height) / 24
            text: 'Back'
            on_release: 
                app.root.current = 'third'
                root.manager.transition.direction = 'right'

        Button:
            pos_hint:{"x":0.78,"y":0.85}
            size_hint: 0.2, 0.05
            font_size: min(root.width,root.height) / 24
            text: 'Home'
            on_release: 
                app.root.current = 'main'
                root.manager.transition.direction = 'left'

        Label:
            pos_hint:{"x":0.3,"top":0.96}
            size_hint: 0.4, 0.1
            text: 'Pick a'
            font_size: min(root.width,root.height) / 10
            color: 1,0,0,1

        Label:
            pos_hint:{"x":0.3,"top":0.88}
            size_hint: 0.4, 0.1
            text: 'Period'
            font_size: min(root.width,root.height) / 10
            color: 1,0,0,1

        Label:
            size_hint: 0.2, 0.1
            pos_hint: {"x":0.1,"center_y":0.75}
            text: 'From'
            font_size: min(root.width,root.height) / 16
        
        TextInput:
            id: d1
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.28,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            padding: 2,self.height/2 - self.font_size/2,2,2
            multiline: False

        Label:
            size_hint: 0.02, 0.05
            pos_hint: {"x":0.32,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            text: '-'

        TextInput:
            id: m1
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.34,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            padding: 2,self.height/2 - self.font_size/2,2,2
            multiline: False

        Label:
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.37,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            text: '-'

        TextInput:
            id: y1
            size_hint: 0.08, 0.05
            pos_hint: {"x":0.40,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            padding: 2,self.height/2 - self.font_size/2,2,2
            multiline: False

        Label:
            size_hint: 0.1, 0.1
            pos_hint: {"x":0.48,"center_y":0.75}
            text: 'To'
            font_size: min(root.width,root.height) / 16
        
        TextInput:
            id: d2
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.58,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            padding: 2,self.height/2 - self.font_size/2,2,2
            multiline: False

        Label:
            size_hint: 0.02, 0.05
            pos_hint: {"x":0.62,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            text: '-'

        TextInput:
            id: m2
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.64,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            padding: 2,self.height/2 - self.font_size/2,2,2
            multiline: False

        Label:
            size_hint: 0.04, 0.05
            pos_hint: {"x":0.67,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            text: '-'

        TextInput:
            id: y2
            size_hint: 0.08, 0.05
            pos_hint: {"x":0.70,"center_y":0.75}
            font_size: min(root.width,root.height) / 36
            padding: 2,self.height/2 - self.font_size/2,2,2
            multiline: False

        Button:
            pos_hint:{"x":0.8,"center_y":0.75}
            size_hint: 0.1, 0.06
            font_size: min(root.width,root.height) / 24
            text: 'Get'
            on_release: 
                if not root.dateValid(d1.text,m1.text,y1.text): get.text = 'Date is not Valid'; get.color = 1,0,0,1
                elif not root.dateValid(d2.text,m2.text,y2.text): get.text = 'Date is not Valid'; get.color = 1,0,0,1
                else: get.text = ''; get.color = 0,1,0,1 ; f = root.dater(d1.text,m1.text,y1.text); t = root.dater(d2.text,m2.text,y2.text); g = root.getAll(f,t)
        Label:
            id: get
            pos_hint:{"x":0.1,"center_y":0.66}
            size_hint: 0.15, 0.06
            font_size: min(root.width,root.height) / 36
            text: ''

        Button:
            pos_hint:{"x":0.4,"center_y":0.66}
            size_hint: 0.15, 0.06
            font_size: min(root.width,root.height) / 24
            text: 'Dollar'
            on_release:
                None

        Button:
            pos_hint:{"x":0.6,"center_y":0.66}
            size_hint: 0.15, 0.06
            font_size: min(root.width,root.height) / 24
            text: 'Euro'
            on_release: 
                None

        Button:
            pos_hint:{"x":0.8,"center_y":0.66}
            size_hint: 0.15, 0.06
            font_size: min(root.width,root.height) / 24
            text: 'Lira'
            on_release: 
                None


        Label:
            size_hint: 0.2, 0.2
            pos_hint: {"x":0.1,"center_y":0.65}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: 'Income'
            halign: 'left'
            color: 0,1,0,1

        Label:
            id: incD
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.4,"center_y":0.65}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,1,0,1

        Label:
            id: incE
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.6,"center_y":0.65}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,1,0,1

        Label:
            id: incL
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.8,"center_y":0.65}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,1,0,1

        Label:
            size_hint: 0.2, 0.2
            pos_hint: {"x":0.1,"center_y":0.57}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: 'Food'
            halign: 'left'
            color: 0.8,0,0,1

        Label:
            id: fooD
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.4,"center_y":0.57}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.8,0,0,1

        Label:
            id: fooE
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.6,"center_y":0.57}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.8,0,0,1

        Label:
            id: fooL
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.8,"center_y":0.57}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.8,0,0,1

        Label:
            size_hint: 0.2, 0.2
            pos_hint: {"x":0.1,"center_y":0.49}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: 'Bills'
            color: 1,0.6,0,1

        Label:
            id: bilD
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.4,"center_y":0.49}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 1,0.6,0,1

        Label:
            id: bilE
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.6,"center_y":0.49}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 1,0.6,0,1

        Label:
            id: bilL
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.8,"center_y":0.49}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 1,0.6,0,1

        Label:
            size_hint: 0.2, 0.2
            pos_hint: {"x":0.1,"center_y":0.41}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: 'Clothing'
            color: 0,0.5,0.5,1

        Label:
            id: cloD
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.4,"center_y":0.41}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,0.5,0.5,1

        Label:
            id: cloE
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.6,"center_y":0.41}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,0.5,0.5,1

        Label:
            id: cloL
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.8,"center_y":0.41}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,0.5,0.5,1

        Label:
            size_hint: 0.2, 0.2
            pos_hint: {"x":0.1,"center_y":0.33}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            multiline : False
            text: 'Education'
            color: 0.7,0,0.7,1

        Label:
            id: eduD
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.4,"center_y":0.33}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.7,0,0.7,1

        Label:
            id: eduE
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.6,"center_y":0.33}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.7,0,0.7,1

        Label:
            id: eduL
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.8,"center_y":0.33}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.7,0,0.7,1

        Label:
            size_hint: 0.2, 0.2
            pos_hint: {"x":0.1,"center_y":0.25}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: 'Health'
            color: 0,0.4,0.8,1

        Label:
            id: heaD
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.4,"center_y":0.25}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,0.4,0.8,1

        Label:
            id: heaE
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.6,"center_y":0.25}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,0.4,0.8,1

        Label:
            id: heaL
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.8,"center_y":0.25}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0,0.4,0.8,1

        Label:
            size_hint: 0.3, 0.2
            pos_hint: {"x":0.1,"center_y":0.17}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: 'Fun'
            color: 0.9,0.3,0.2,1

        Label:
            id: entD
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.4,"center_y":0.17}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.9,0.3,0.2,1

        Label:
            id: entE
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.6,"center_y":0.17}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.9,0.3,0.2,1

        Label:
            id: entL
            size_hint: 0.15, 0.2
            pos_hint: {"x":0.8,"center_y":0.17}
            font_size: min(root.width,root.height) / 24
            text_size: self.size
            text: '-'
            halign: 'right'
            color: 0.9,0.3,0.2,1




        
           
